let cod_sub = await this.prismaNovasoftService.$queryRawUnsafe<any[]>(`
  DECLARE @obs_orc CHAR(20) = '${referencia}';
  DECLARE @asig_numero CHAR(14);
  DECLARE @sub_tip CHAR(5);

  SELECT @asig_numero = asig_numero
  FROM inv_inf_inv
  WHERE obs_orc LIKE '%' + @obs_orc + '%';

  SET @sub_tip = CASE 
      WHEN LEFT(@asig_numero, 2) IN ('OS', 'OC') THEN 'C008'
      WHEN LEFT(@asig_numero, 2) = 'PF' THEN 'PFIN'
      WHEN LEFT(@asig_numero, 2) = 'CN' THEN 'NCIN'
      ELSE NULL
  END;

  SELECT @asig_numero AS asig_numero, @sub_tip AS sub_tip;
`);


// Si no hay registro en Novasoft, crear un objeto con la referencia de Auraquantic
if (cod_sub.length === 0) {
  cod_sub = [{ asig_numero: referencia, sub_tip: 'C008' }]; // Puedes poner el subtipo que necesites
}

// Extraer valores para usar en tu l√≥gica
const asigNumero = cod_sub[0].asig_numero;
const subTip = cod_sub[0].sub_tip;

console.log('Subtipo:', subTip, 'Asig_Numero:', asigNumero);