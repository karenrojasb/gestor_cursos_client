if (item['3_Pagos'] === 395) {

    // Total de lÃ­neas del primer estado (solo pago 395)
    const totalEstado = consultaEstado.filter(
        e => e['3_Pagos'] === 395
    ).length;

    // Consulta Nova
    const consultaEstadoNova = await this.prismaNovasoftService.$queryRawUnsafe<any[]>(`
        SELECT asig_numero 
        FROM inv_inf_inv 
        WHERE obs_orc = '${obs_orc}'
        AND usr_pedido = '${item['3_numeroOrdenCompra']}'
    `);

    const totalNova = consultaEstadoNova.length;

    // Validar si hay asig_numero no nulo
    const tieneAsigNumero = consultaEstadoNova.some(
        n => n.asig_numero !== null
    );

    if (
        totalEstado === totalNova &&
        totalNova > 0 &&
        tieneAsigNumero
    ) {
        estadoLinea = 1;
    } else {
        estadoLinea = 0;
    }
}