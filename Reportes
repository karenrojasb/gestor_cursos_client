const indexUsado = new Map<string, number>();

for (const aura of cantidadesAuraParcial) {
  const codigoAura = normalizar(...);

  const usado = indexUsado.get(codigoAura) || 0;
  const nova = novas[usado];

  indexUsado.set(codigoAura, usado + 1);
}

for (const aura of cantidadesAuraParcial) {

  const codigoAura = normalizar(aura.codItem.split(' - ')[0]);
  const novas = mapaItems.get(codigoAura);

  if (!novas || novas.length === 0) {
    throw new BadRequestException(`Item no encontrado: ${codigoAura}`);
  }

  const usado = indexUsado.get(codigoAura) || 0;

  if (usado >= novas.length) {
    throw new BadRequestException(
      `El item ${codigoAura} se intenta insertar mÃ¡s veces de las que existen en ERP`
    );
  }

  const nova = novas[usado]; // ðŸ‘ˆ SOLO UNA
  indexUsado.set(codigoAura, usado + 1);

  if (aura.CantidadI <= 0) continue;

  await this.prismaNovasoftService.$executeRawUnsafe(`
    INSERT INTO inv_inf_inv (...)
    VALUES (
      ...
      '${aura.CantidadI}'
    )
  `);
}