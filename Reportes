const codigoAura = normalizar(
      String(aura.codItem).split(' - ')[0]
    );

    const novas = mapaItems.get(codigoAura);
    if (!novas || novas.length === 0) {
      throw new BadRequestException(`Item no encontrado: ${codigoAura}`);
    }

    let restante = CantidadPendiente;

    for (const nova of novas) {
      if (restante <= 0) break;

      // CANTIDAD REAL A INSERTAR
      const cantidadInsertar = Math.min(restante, CantidadPendiente);
      if (cantidadInsertar <= 0) break;

      await this.prismaNovasoftService.$executeRawUnsafe(`
   