console.log('ÓRDENES OBTENIDAS:', ordenes);
console.log('INGRESOS OBTENIDOS:', consultaIngreso);

let estadoFinal = 1;

for (const orden of ordenes) {
    const ingreso = consultaIngreso.find(i => i.usr_pedido === orden);

    console.log('-----------------------');
    console.log('Evaluando orden:', orden);
    console.log('Ingreso encontrado:', ingreso);

    if (!ingreso) {
        console.log('❌ NO existe ingreso para la orden');
        estadoFinal = 0;
        break;
    }

    if (!ingreso.asig_numero) {
        console.log('❌ Existe ingreso pero asig_numero está vacío:', ingreso.asig_numero);
        estadoFinal = 0;
        break;
    }

    console.log('✅ Orden válida');
}

console.log('ESTADO FINAL:', estadoFinal);